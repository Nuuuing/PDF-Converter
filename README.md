# PDF CONVERTER

브라우저 환경에서 이미지를 PDF로 변환하는 프로젝트입니다.  
별도의 서버 요청 없이 **클라이언트에서 바로 처리**되며,  
용지 크기, 방향, 화질 같은 출력 옵션도 세밀하게 조절할 수 있습니다.

## 💡 Key Features

- **📂 파일 관리 (File & Folder)**  
  - 개별 이미지 업로드는 물론, 폴더 단위로도 이미지들을 한 번에 불러올 수 있습니다.  
  - 폴더 선택 시 파일을 **이름·경로 기준으로 정렬**해 안정적으로 로딩합니다.

- **🖱️ 드래그 기반 UX (Drag & Drop)**  
  - 드래그 앤 드롭으로 이미지를 쉽게 추가할 수 있습니다.  
  - 리스트 내에서도 드래그로 PDF 페이지 순서를 직접 조절할 수 있습니다.

- **⚙️ PDF 출력 옵션**
  - **용지 크기**: A4(기본), A3, A5, Letter, Legal  
  - **용지 방향**: 세로/가로 전환  
  - **압축 옵션**: 화질 4단계(0.5 ~ 1.0) 제공  
    → 고화질 유지부터 용량 최적화까지 상황에 맞게 선택 가능

## 🛠️ Tech Stack

| Category | Technology | Version |
| --- | --- | --- |
| Framework | Next.js (App Router) | `v16.0.1` |
| Library | React | `v19.2.0` |
| Language | TypeScript | `^5` |
| State Mgmt | Zustand | `^5.0.8` |
| PDF Engine | pdf-lib | `^1.17.1` |
| Styling | Tailwind CSS | - |

---

## 💡 Technical Decisions & Challenges

### 1. 데이터 무결성을 위한 UUID 도입 (vs useRef?)

초기에는 메모리를 아끼기 위해 `useRef`로 단순 숫자 카운터를 생성하는 방식도 고려했지만, 프로젝트 구조와 맞지 않는 문제가 있었습니다.

**문제 분석**
- **ID 중복 위험**  
  파일 업로드 탭과 폴더 업로드 탭은 서로 독립된 컴포넌트입니다.  
  두 컴포넌트 모두 `useRef`를 사용하면 각각 `id: 1`부터 시작하게 되고,  
  이 값들이 상위(`Home`)에서 하나의 리스트로 합쳐질 때 **Key 충돌**이 발생합니다.  
  특히 DnD(Drag & Drop) 과정에서 DOM 매칭이 꼬이면서 UI가 불안정해질 가능성이 큽니다.

- **불필요한 결합도 증가**  
  충돌을 막기 위해 ID 생성 책임을 부모로 옮기는 것도 가능하지만,  
  그러면 하위 컴포넌트가 부모 로직에 종속되어 **재사용성과 독립성이 떨어지는** 구조가 됩니다.

**결론**
- `crypto.randomUUID()`를 사용하여 파일이 어디에서 생성되든 **전역적으로 고유한 ID**를 부여했습니다.  
- 이 방식은 별도 관리 없이도 충돌을 완전히 방지하고, 컴포넌트 간 결합도도 올리지 않습니다.

**결과**
- 파일/폴더 탭 구분 없이 ID가 100% 유일하게 보장  
- 데이터 병합/렌더링 과정에서 Key 충돌 제거
- 컴포넌트 구조를 단순하고 독립적으로 유지할 수 있음
- 약간의 메모리 오버헤드는 있었지만 **안정성·확장성을 우선시하여 UUID를 선택**

---

### 2. 데이터 유지 전략: Lifting State Up

처음엔 각 탭 컴포넌트 내부에서 상태를 관리했지만,  
탭을 이동하면 컴포넌트가 UnMount되면서 선택한 파일이 사라지는 문제가 있었습니다.

**해결**  
- 파일 데이터는 상위 컴포넌트에서 관리하도록 구조를 변경했습니다.
- 상태가 유지되므로 탭을 이동해도 작업이 초기화되지 않아 UX가 안정적입니다.

---

### 3. Zustand 선택 이유 (vs Recoil, Redux)

- 기존에 자주 사용하던 Recoil은 메인테이너 지원 축소 이슈로 제외
- 이번 프로젝트에서 Zustand를 익혀보기 위해 도입
- 코드 구조가 단순하고 Hook 기반이라 파일 리스트와 PDF 옵션 상태 관리를 편하게 처리할 수 있었음

---

### 4. 폴더 처리와 브라우저 보안 제약

**문제**  
브라우저 정책상 절대 경로나 실제 파일 시스템 정보 저장을 허용하지 않습니다.

**해결**  
- 선택 시점에 파일을 즉시 메모리에 올려서 보존  
- 폴더 탭에서는 전체 리스트를 그리기보다 “요약 정보” 중심 렌더링으로 성능 확보  
- `webkitRelativePath`를 활용해 **경로 기반 정렬**을 구현해 파일 순서가 흐트러지는 문제도 해결했습니다.

---

## 🚀 Getting Started

```bash
# 1. Install Dependencies
npm install

# 2. Run Development Server
npm run dev
